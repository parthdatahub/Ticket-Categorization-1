from List_Incidents import get_incidents
from Update_Incident import send_updates
from ml_loader import model_loader
from api_res_report import gen_report
import json
from kpi_generator import compare_jsons


incidents_list=get_incidents()
print("New ticket response is  ",incidents_list)
ml_response=model_loader(incidents_list)
print("ML Model response is ",ml_response)
#New_ticket_response =[{'Incident_ID': '0c5f3cece1b12010f877971dea0b1449', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.8}, {'Incident_ID': '46e2fee9a9fe19810049b49dee0daf58', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.8}, {'Incident_ID': '46e3e949a9fe19810069b824ba2c761a', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.66}, {'Incident_ID': '46e482d9a9fe198101d3e3f3e2a14459', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.73}, {'Incident_ID': '46e57642a9fe1981000b96a5dca501ff', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.73}, {'Incident_ID': '46e8219ba9fe1981013806b6e04fed06', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.67}, {'Incident_ID': '46edaa6aa9fe198101b9d14ced16619f', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.73}, {'Incident_ID': '46f09e75a9fe198100f4ffd8d366d17b', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.76}, {'Incident_ID': '46f4f4dfa9fe198100063e60278f76ec', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.76}, {'Incident_ID': '46f67787a9fe198101e06dfcf3a78e99', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.77}, {'Incident_ID': '47064b68a9fe19810186793eefffc9b7', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.75}, {'Incident_ID': '4715ab62a9fe1981018c3efb96143495', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.94}, {'Incident_ID': '471bfbc7a9fe198101e77a3e10e5d47f', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.73}, {'Incident_ID': '471d4732a9fe198100affbf655e59172', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.94}, {'Incident_ID': '471eb058a9fe198100f89592e1ea93d3', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.78}, {'Incident_ID': '47204688a9fe1981011a20af100f381a', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.69}, {'Incident_ID': '552c48888c033300964f4932b03eb092', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.78}, {'Incident_ID': '57af7aec73d423002728660c4cf6a71c', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.62}, {'Incident_ID': '78271e1347c12200e0ef563dbb9a7109', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.76}, {'Incident_ID': '85071a1347c12200e0ef563dbb9a71c1', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.87}, {'Incident_ID': '8d6353eac0a8016400d8a125ca14fc1f', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.73}, {'Incident_ID': '965c9e5347c12200e0ef563dbb9a7156', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.76}, {'Incident_ID': '9d385017c611228701d22104cc95c371', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.72}, {'Incident_ID': 'a2496c05731110107418660c4cf6a711', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.77}, {'Incident_ID': 'a623cdb073a023002728660c4cf6a768', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.91}, {'Incident_ID': 'a83820b58f723300e7e16c7827bdeed2', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.78}, {'Incident_ID': 'a9a16740c61122760004fe9095b7ddca', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.92}, {'Incident_ID': 'a9e30c7dc61122760116894de7bcc7bd', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.92}, {'Incident_ID': 'a9e428cac61122760075710592216c58', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.64}, {'Incident_ID': 'ae01711047bb6a1035c8cbb9316d4306', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.8}, {'Incident_ID': 'd7158da0c0a8016700eef46c8d1f3661', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.82}, {'Incident_ID': 'd7195138c0a8016700fd68449cfcd484', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.82}, {'Incident_ID': 'd71b3b41c0a8016700a8ef040791e72a', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.82}, {'Incident_ID': 'd71da88ac0a801670061eabfe4b28f77', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.78}, {'Incident_ID': 'd71f7935c0a8016700802b64c67c11c6', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.8}, {'Incident_ID': 'e8caedcbc0a80164017df472f39eaed1', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.71}, {'Incident_ID': 'ed92e8d173d023002728660c4cf6a7bc', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.77}, {'Incident_ID': 'ef4225a40a0a0b5700d0b8a790747812', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.62}, {'Incident_ID': 'ef43c6d40a0a0b5700c77f9bf387afe3', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.76}, {'Incident_ID': 'efb7184147bf2e1035c8cbb9316d434a', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.82}, {'Incident_ID': 'f12ca184735123002728660c4cf6a7ef', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.7}, {'Incident_ID': 'ff4c21c4735123002728660c4cf6a758', 'Assignment_Group': 'wit-servicedesk-l1', 'Confidence_Score': 0.66}]

#print(type(New_ticket_response))
response=send_updates(ml_response)
print("SNOW response is  ",response)
#result=gen_report(response)

compare_jsons(incidents_list,ml_response)
